traefik:
  deployment:
    enabled: true
    replicas: 3

  # Disable Ingress support
  ingressClass:
    enabled: false

  # Enable Gateway API provider
  providers:
    kubernetesGateway:
      enabled: true

  # Configure entry points
  ports:
    web:
      port: 8000
      exposedPort: 80
      protocol: TCP
    websecure:
      port: 8443
      exposedPort: 443
      protocol: TCP

  # Enable Traefik dashboard via IngressRoute (internal only)
  ingressRoute:
    dashboard:
      enabled: true
      entryPoints: ["traefik"]

  # Gateway API configuration
  gatewayClass:
    enabled: true
    name: traefik

  gateway:
    enabled: true
    name: traefik-gateway
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
      external-dns.alpha.kubernetes.io/target: "homelab-tunnel.fullstackjam.com"
      external-dns.alpha.kubernetes.io/cloudflare-proxied: "true"
    listeners:
      web:
        port: 8000
        protocol: HTTP
      websecure:
        port: 8443
        protocol: HTTPS
        hostname: traefik.fullstackjam.com
        certificateRefs:
          - name: traefik-tls-certificate
            kind: Secret

  # Enable metrics for Prometheus
  metrics:
    prometheus:
      service:
        enabled: true
      serviceMonitor:
        enabled: true

  # Service configuration
  service:
    enabled: true
    type: LoadBalancer
