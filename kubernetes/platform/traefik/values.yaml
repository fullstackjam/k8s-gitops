traefik:
  deployment:
    enabled: true
    replicas: 3

  # Disable Ingress support
  ingressClass:
    enabled: false

  # Enable Gateway API provider
  providers:
    kubernetesGateway:
      enabled: true

  # Configure entry points
  ports:
    web:
      port: 8000
      exposedPort: 80
      protocol: TCP
    websecure:
      port: 8443
      exposedPort: 443
      protocol: TCP

  # Enable Traefik dashboard
  ingressRoute:
    dashboard:
      enabled: true
      matchRule: Host(`traefik.fullstackjam.com`)
      entryPoints: ["websecure"]
      # Cert-manager annotations
      annotations:
        cert-manager.io/cluster-issuer: letsencrypt-prod
        external-dns.alpha.kubernetes.io/target: "homelab-tunnel.fullstackjam.com"
        external-dns.alpha.kubernetes.io/cloudflare-proxied: "true"
      # TLS configuration - use cert-manager
      tls:
        secretName: traefik-tls-certificate
        domains:
          - main: traefik.fullstackjam.com

  # Enable metrics for Prometheus
  metrics:
    prometheus:
      service:
        enabled: true
      serviceMonitor:
        enabled: true

  # Service configuration
  service:
    enabled: true
    type: LoadBalancer
